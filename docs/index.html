<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Text‑Extractor Tool</title>

  <!-- Bootstrap 5 (CSS only) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-..." crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ======== HEADER ========================================================= -->
<header class="bg-dark py-3">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center text-white">
      <h2 class="mb-0">Text‑Extractor Tool</h2>
      <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#aboutModal">
        About
      </button>
    </div>
  </div>
</header>

<!-- ======== LOADING MODAL ================================================== -->
<div class="modal fade" id="loadingModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center">
        <p id="loadingMessage">Processing…</p>
        <div class="progress mx-4 my-3" style="height: 20px;">
          <div id="loadingBar" class="progress-bar" role="progressbar"
               style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <div id="loadingDetail" class="small text-muted"></div>
      </div>
    </div>
  </div>
</div>

<!-- ======== MAIN ========================================================= -->
<div class="container py-4">

  <!-- 1️⃣ URL section -->
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">Fetch a URL</h5>
      <div class="input-group">
        <input type="text" id="urlInput" class="form-control"
               placeholder="https://example.com">
        <button id="fetchUrlBtn" class="btn btn-primary">Fetch &amp; Extract</button>
      </div>
    </div>
  </div>

  <!-- 2️⃣ File upload section -->
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">Upload one or more files</h5>
      <input type="file" id="fileInput" class="form-control"
             accept=".pdf,.txt,.md,.markdown" multiple>
      <button id="processFileBtn" class="btn btn-success mt-2">Process Files</button>
    </div>
  </div>

  <!-- 3️⃣ Result panel -->
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">Result</h5>
      <div id="summary" class="mb-2 text-muted"></div>
      <div id="tokenCount" class="mb-2 text-muted"></div>
      <div id="combined" class="collapse">
        <pre id="output" class="border bg-light p-2"></pre>
      </div>
      <button id="toggleBtn" class="btn btn-outline-secondary mb-2"
              disabled>Show Combined Text</button>
      <div>
        <button id="downloadBtn" class="btn btn-outline-primary" disabled>Download .txt</button>
        <button id="copyBtn" class="btn btn-outline-secondary" disabled>Copy to Clipboard</button>
        <span id="processing" class="text-muted ms-3">Processing…</span>
      </div>
    </div>
  </div>
</div>

<!-- ======== FOOTER ========================================================= -->
<footer class="bg-light text-center py-3">
  <small>
    MIT License – see <a href="https://github.com/97115104/model-development/blob/main/docs/LICENSE"
        target="_blank">LICENSE</a> |
    Source: <a href="https://github.com/97115104/model-development" target="_blank">GitHub</a>
  </small>
</footer>

<!-- ======== ABOUT MODAL ==================================================== -->
<div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="aboutModalLabel">About This Tool</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>
          This static web‑app lets you fetch a URL or upload a PDF / text / Markdown file, extracts the visible
          content, removes non‑printable characters, estimates the token count (word count), and lets you
          download or copy the cleaned plain‑text. It also performs OCR on image‑based PDFs using
          <a href="https://github.com/naptha/tesseract.js" target="_blank">Tesseract.js</a>.
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- ======== DEPENDENCIES ==================================================== -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

<!-- PDF.js (UMD build) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.8.162/pdf.min.js"></script>
<script>
  // Tell PDF.js where its worker lives
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.8.162/pdf.worker.min.js';
</script>

<!-- Tesseract.js for OCR -->
<script src="https://unpkg.com/tesseract.js@latest"></script>

<script src="main.js"></script>
</body>
</html>